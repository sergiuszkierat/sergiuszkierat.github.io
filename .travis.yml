language: ruby

rvm:
  - 2.2.2

before_script:
  - git config --global user.email "build@travisci.org"
  - git config --global user.name "Travis CI"

script:
  - bundle exec jekyll build
  - bundle exec htmlproof ./_site --only-4xx --check-html --disable-external --allow-hash-href

after_success:
  - ./deploy.sh

env:
  global:
    - NOKOGIRI_USE_SYSTEM_LIBRARIES=true
    - GH_REF: github.com/sergiuszkierat/sergiuszkierat.github.io
    - GH_TOKEN: 3c9b8514069449082a1c447e006d05d7fae90ca9

branches:
  only:
    - source
